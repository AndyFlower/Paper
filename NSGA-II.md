行驶里程和加速时间

![image-20201009133924760](images\image-20201009133924760.png)

![image-20201009134117370](images\image-20201009134117370.png)

![image-20201009134416780](images\image-20201009134416780.png)

首先，有一个包含一定数量个体的种群，每个个体的基因或参数都不同，对于每个个体而言，目标指标的值都经过计算或模拟，这意味着我知道该种群Pt中每一个个体在我的目标指标上的表现如何。因此，基于现有的种群Pt,创建了后代种群Qt，通过混合性能更好的个体基因和引起变异，因此，新种群Rt是父带种群Pt的两倍大小。然后根据每个人在目标指标方面的表现对其进行排名。性能越好，排名越高。如您所见，排名后产生了不同的等级，例如F1、F2等等，排名的数值越小，个人的性能就越好，在排名最高的人中选择新种群，直到达到原始种群的规模为止，如图，如果把F2加到新种群当中，仍然未达到原始种群Pt的大小，而最后一个等级F3太大了，不是所有的个体都能进入到新的父带种群中，这种情况下，由于在一个等级中的个体大概都有相同的性能，在这里要用到拥挤距离排序，这使我们可以挑选一些个体填补下一代的种群，直到达到原始规模为止，这个解释的过程实际上是迭代地发生的。它会按照要求的次数反复进行，或者直到目标指标的增加达到我想要的极限为止。

以下，我们仔细看看我向您展示的整个过程的各个部分

- Non-Dominated Sorting 

  ![image-20201009142259894](images\image-20201009142259894.png)

从非支配排序开始，在左侧我问您提供了一个点样本，他们代表了总体中的一个个体，颜色代表了他们的等级。在这个例子中，我们有目标指标f1和f2，我们的目标是使两个指标最小化，非支配排序的目标是找出个体属于哪个等级。首先，需要解释下在这种情况下支配的含义，如果一个个体支配另一个个体，则意味着对于两项指标而言支配个体由于或者等于其他个体，并且两项目标指标之一要优于其他个体，如果现在看一下图表，比较此处的绿色点和此处的蓝色点，在两个不同的个体中，绿点支配着蓝点，因为在一方面，目标值f1和f2,绿色个体小于或等于蓝色个体，另一方面，在这个例子中，这个绿点的目标指标全部优于这个蓝点的目标指标

，另一方面，如果我在此处有一个点，与绿点的f2指标处于同一水平，比较他们左边的点是否支配右边的点，我可以采取同样的做法，就如前面所提到的，比较f1和f2的值较小或相等，右边的点，在这种情况下不是两个参数都被支配，但其中一个是，即f1指标左侧优于右侧，因此，该点也将支配相邻区域的点。

![image-20201009145018968](images\image-20201009145018968.png)

现在你已经了解了如果检查一个个体支配或被支配另一个个体，我们可以从真正的排序过程开始。因此，对于种群Rt中的每个个体将与其他个体进行比较，并成对的检查该个体是否由另一个个体支配或是支配另一个个体，当我们将一个个体与其他个体进行比较时，将同时计算有多少个体支配该个体并创建该特定个体所支配的所有个体的列表，因此，假设每个个体每次计一个数有多少个体支配该个体，并列出哪些个体由该个体支配，基于此信息，我们可以开始我们的排序过程。

![image-20201009145658479](images\image-20201009145658479.png)我们的目标是找到不同的等级，找到第一个等级非常容易，我只选择这个群体中的所有个体计数为0的个体，意味着他们不被其他个体支配，为了找到属于等级F2的个体，我们再次迭代F1中的个体，每个个体由一个包含其支配的所有个体的列表，遍历所有这些列表，并且对于其中一个列表中的每个个体把Domination_count减去1，因此，所有仅受F1支配的个体，现在的Domination_count是0，作为例子，您可以看到此处 属于F1的D和E他们的支配列表里都含有C，所以Domination_count减去两个1，排除了F1后的Domination_count是0，因此个体C属于F2。以该例为例，对F1的支配列表中的每个个体做该计算，使每个个体获得一个新的排名，在F1中的个体，排名第一，红色的个体属于F3，排名第三.把最好的等级作为下一代的父带种群，其中一个等级可能无法全部进入下一个父带群体，因为需要与以前的种群规模保持一致，为了使NSGA-II保持良好的传播并避免局部最大值和最小值，而不是寻找全局最大值，拥挤距离因子决定将哪些个体添加到新种群中，拥挤距离较大的个体首先选择，每个个体的总拥挤距离是每个单个目标指标的距离的总和，在我们的案例中，我们有两个目标指标，等级的划分考虑每个目标指标，因此，一次将其分类为F1，然后再下一个迭代过程中将其分类为F2，并且对于每次分类迭代此目标指标的最小值和最大值的个体将获得非常高的距离值，在示例中，将其设置为无限大，而其他距离通过相邻个体的距离值来计算，看图中的点i,我为点i取了前面较小的值和下一个较大的值的距离，并建立了这些值的增量然后将其除以最大值以及最小值的增量，然后将该计算结果加到其他个体的已计算距离上，结果是，在这种情况下，对于给定的F3，所有个体都将获得拥挤距离值，现在要选择哪些个体去作为下一代父代种群，选择拥挤距离向量最高的个体作为下一代种群

- Crowding Distance Sorting 

  ![image-20201009151435340](images\image-20201009151435340.png)

- Product Offspring

  完成分类并选择下一代的新种群后，该种群需要新的后代，通过三个步骤来迭代创建后代，重复他们，直到后代种群Qt的大小与父代种群Pt的大小相同，首先，不同的成员通过锦标赛选择进行比较，然后较强的个体被选择与另一个被选中的较强个体进行繁殖，这导致他们的DNA发生交叉，最终可能发生随机突变，仔细看提到的这3个部分

![image-20201009152926325](images\image-20201009152926325.png)

1. Tournament Selection

   每个子代需要两个父代，父代是通过锦标赛选择的，从父代种群Pt中随机选择两个人，然后进行比较，首先按等级进行比较，排名较高的个体可以繁殖，因此这里的a1比a2要大，这个人可以繁殖后代，在排名相等的情况下，拥挤距离决定允许哪个人繁殖，因此如果b1比b2大，而且等级a1和a2相同则下方的人允许繁殖后代，此操作完成了2次，一次对父代一号，另一次对父代二号，每一次随机抽取两个样本，在此基础上，就会知道父代个体以及其DNA，便可以进行交叉过程，交叉过程只是提取被选择个体的DNA并将其混合

   ![image-20201009162042016](images\image-20201009162042016.png)

2. Crossover

   交叉过程只是提取被选择个体的DNA并将其混合，回想汽车的例子，一个基因就是汽车车轮的大小，另一个基因是电池的容量，最后一个是引擎的功率，在这个示例中，每个人都有六个基因，交叉随机获取一个人的一半基因，用另一个人的基因来改变它，就得到二个子代的DNA，因此，这里的基因只是混合在一起

   ![image-20201009162613624](images\image-20201009162613624.png)

3.  Mutation

   在将这些孩子添加到后代种群并再次开始迭代过程之前可能会发生随机突变，这些突变可以非常单独的使用，就像本例中看到的那样有一个随机基因被挑选和修改，对于一个基因，你可以根据一个百分比来修改它。或者选择一个基因值重新取样，这是你自己的选择，回到汽车的例子中，车轮大小的基因发生随机突变。假设在我们的示例中轮子的直径为27厘米，发生基因突变使轮子的尺寸额外增加10%，因为我们选择让轮子尺寸随机增加或减少10%，新的轮子尺寸大约为30厘米，这个子代伴随着这个突变被加入到下一代种群中。实际上是重复进行的，直到达到一定的迭代数量为止，比如说400次来得到最优解，或者直到各项指标的变化不会太大为止

   ![image-20201009162919247](images\image-20201009162919247.png)

4. 